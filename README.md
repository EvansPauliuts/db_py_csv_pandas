# Data Collection Project

Этот проект предназначен для автоматического сбора данных из базы данных PostgreSQL, 
их сохранения в CSV файл и ежедневного выполнения задачи с использованием cron.

## Структура проекта

- `app/` — каталог с исходным кодом.
  - `main.py` — основной скрипт для выполнения запросов и сохранения данных.
  - `database.py` — дополнительные функции для работы с базой данных.
  - `run_task.sh` — скрипт для запуска задачи с интервалом 1 минута.
- `docker-compose.yml` — конфигурация для запуска контейнеров PostgreSQL и приложения.
- `Dockerfile` — настройки для создания Docker образа.
- `Makefile` — автоматизация команд для сборки, тестирования и запуска контейнеров.
- `crontab` — файл для настройки cron, который запускает задачи каждую минуту.
- `tests/` — тесты для проверки работы приложения.
- `data/` — папка для сохранения CSV файлов.
- `.env` — конфигурации для подключения к базе данных.

## Установка

1. Склонируйте репозиторий на ваш компьютер:
```bash
   git clone <url>
   cd <project-folder>
```
2. Убедитесь, что у вас установлен Docker и Docker Compose.
3. Создайте файл `.env` в корне проекта и настройте параметры подключения к базе данных:
```bash
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=your_database
DB_USER=your_user
DB_PASSWORD=your_password
```
4. Соберите и запустите контейнеры:
```bash
make up
```
5. Для запуска cron-планировщика внутри контейнера используйте команду:
```bash
make cron
```

## Запуск тестов

Для запуска тестов используйте команду:
```bash
make test
```

## Остановка и очистка контейнеров

Для остановки контейнеров и удаления данных:
```bash
make down
```
Для полной очистки:
```bash
make clean
```

## Логи

Для просмотра логов:
```bash
make logs
```
